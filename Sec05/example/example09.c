/*09. printf() 함수가 인자들을 해석하는 과정*/
#include <stdio.h>

int main(){
    float n1=3.14;//4bytes
    double n2=1.234;//8bytes
    int n3=1024;//4bytes

    printf("%f %f %f\n",n1,n2,n3);//정상 출력

    //출력 과정에서 문제가 발생하게 되는 경우들
    printf("%d %d %d\n\n",n1,n2,n3);//4,4,4
    printf("%lld %lld %lld\n\n", n1,n2,n3);//8,8,4
    printf("%f %d %d\n\n",n1,n2,n3);//8,4,4
    printf("%f %lld %d\n\n",n1,n2,n3);//8,8,4

    return 0;
    /*위의 데이터들은 메모리의 스택 공간에 차례로 4byte, 8byte, 4byte씩 쌓인다
    printf에서 float형 인수를 모두 double형으로 인식한다.실제 메모리에서 저장이 될 때는 4byte의 공간을 차지하게 되나 printf() 함수가 읽어들일 때 double형으로 읽는다.
    따라서 n1 변수 자체는 4byte의 크기로 메모리에 저장이 되나, printf가 읽어 들일 때는 double로 처리된다.

    printf는 형식 지정자(format string)에 따라 인수를 해석하게 되는데, 형식 지정자와 실제 인수 타입이 일치하지 않으면
    잘못된 크기의 메모리를 읽거나, 값을 잘못된 방식으로 해석하게 되어 결과가 예측 불가능해진다.
     
    위의 예시를 보자면
    -%d는 int를 해석하는 데 쓰이는 형식 지정자인데, 이 형식 지정자로 double값을 해석하게 되면 처음 4byte를 double이
    아닌 int 방식으로 읽게 되어 이상한 값이 출력된다.

    -%lld는 8byte 크기의 long long 자료를 기대하지만 실제 인수가 double이면 double의 bit 패턴을 정수 방식으로 
    해석해 결과값이 올바르지 않다. 

    위의 두 경우 모두 부동 소수점을 정수형 방식으로 읽어들여 출력에서 에러가 생기게 되었다. 알다시키 정수형 자료와 부동수점 형 자료는 그 자료가 
    메모리에 저장되는 방식이 상당히 다르다.
    
    즉, 형식지정자란 메모리에 저장된 값을 자료형에 맞게 읽어들이기 위한 일종의 번역 지침서 같은 거이다.
    */
}